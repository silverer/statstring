---
title: "introduction"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{introduction}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup}

library(statstring)
```


### Using statstring to format ANOVA outputs

statstring is a package to facilitate formatting ANOVA outputs in APA style. For example, using `stats::aov()`:

```{r}
data("warpbreaks")
res <- summary(stats::aov(breaks~wool*tension, data = warpbreaks))
res <- res[[1]] #Get the dataframe with results
str_out <- format_anova_string(f_stat = res$`F value`[nrow(res)-1],
                               dfn = res$Df[nrow(res)-1],
                               dfd = res$Df[nrow(res)],
                               p_val = res$`Pr(>F)`[nrow(res)-1])

```

There was a significant interaction between tension and wool on breaks, `r str_out`.

Using `rstatix::anova_test` and `rstatix::get_anova_table`

```{r}

res <- rstatix::get_anova_table(rstatix::anova_test(breaks~wool*tension, 
                                                    data = warpbreaks, type = 3,
                                                    effect.size = "pes"))

str_out <- format_anova_string(f_stat = res$`F`[nrow(res)],
                               dfn = res$`DFn`[nrow(res)],
                               dfd = res$`DFd`[nrow(res)],
                               p_val = res$`p`[nrow(res)],
                               partial_eta = res$pes[nrow(res)])

```

There was a significant interaction between tension and wool on breaks, `r str_out`.


Using `apaTables::apa.aov.table`:

```{r}

res <- apaTables::apa.aov.table(lm(breaks~wool*tension, data = warpbreaks), type = 3)
res <- res$table_body #Get the dataframe with results
str_out <- format_anova_string(f_stat = res$`F`[nrow(res)-1],
                               dfn = res$`df`[nrow(res)-1],
                               dfd = res$`df`[nrow(res)],
                               p_val = res$`p`[nrow(res)-1],
                               partial_eta = res$partial_eta2[nrow(res)-1])

```

There was a significant interaction between tension and wool on breaks, `r str_out`.


You can also pass a summary object to the `extract_stats` function if you're not sure how to get the rows you want out of the ANOVA result. 

For instance, using the stats::aov() function:


```{r}
res <- summary(stats::aov(breaks~wool*tension, data = warpbreaks))
str_out <- extract_stats(res)
```


There was a significant interaction between tension and wool on breaks, `r str_out`.

Using rstatix::get_anova_table() function:


```{r}

res <- rstatix::get_anova_table(rstatix::anova_test(breaks~wool*tension, 
                                                    data = warpbreaks, type = 3,
                                                    effect.size = "pes"))
str_out <- extract_stats(res)

```


There was a significant interaction between tension and wool on breaks, `r str_out`.


Using apaTables::apa.aov.table() function (also specifying a particular independent variable):


```{r}

res <- apaTables::apa.aov.table(lm(breaks~wool*tension, data = warpbreaks), type = 3)
interaction_out <- extract_stats(res)

wool_out <- extract_stats(res, predictor = "wool") #Specify the name of the predictor
tension_out <- extract_stats(res, predictor = 3) #Can also specify the row of the predictor
```


There was a significant interaction between tension and wool on breaks, `r interaction_out`. There was a main effect of wool on breaks, `r wool_out`. There was a main effect of tension on breaks, `r tension_out`.


### Using statstring to format t-test outputs

You can use statstring to format t-test results as well.

```{r}

indep_test <- stats::t.test(warpbreaks$breaks~warpbreaks$wool)
indep_str <- format_tstat_apa(indep_test)

onesample_test <- stats::t.test(warpbreaks$breaks)
onesample_str <- format_tstat_apa(onesample_test)

```

There was not a significant difference in breaks by wool type, `r indep_str`. The number of breaks differed from zero, `r onesample_str`.

